@0
MOV 999 ACC
L: SAV
MOV RIGHT ACC
JLZ SEND
SWP
SUB RIGHT
JGZ NM #NEW MIN
ADD RIGHT #OLD MIN
JMP L
NM: MOV RIGHT ACC
JMP L
SEND: SWP
MOV ACC RIGHT

@1
MOV -1 RIGHT
L: MOV UP ACC
MOV ACC LEFT
JLZ SEND
MOV ACC LEFT
MOV ACC LEFT
MOV ACC RIGHT
JMP L



SEND:MOV LEFT DOWN
#THEN WAIT:
MOV DOWN NIL

@2


@3


@4
MOV UP ACC
MOV -1 RIGHT
L: SAV
   MOV ACC RIGHT
   MOV RIGHT ACC
   JEZ DONE
   SWP
   JMP L
DONE: #NOW WAIT
MOV RIGHT UP

@5
MOV LEFT RIGHT
LL: MOV UP ACC
JLZ RE
SUB LEFT
MOV -420 LEFT
MOV ACC RIGHT
JMP LL

RE: MOV LEFT NIL
MOV 0 LEFT
MOV -1 DOWN
MOV DOWN LEFT

@6


@7
MOV UP RIGHT
LL: MOV RIGHT ACC
JLZ RE
MOV ACC DOWN
JMP LL

RE: MOV -1 DOWN
MOV -1 UP

@8
MOV LEFT NIL
LL: MOV UP ACC
JLZ RE
MOV ACC LEFT
JMP LL

RE: MOV -1 LEFT