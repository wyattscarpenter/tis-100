@0
MOV RIGHT DOWN

@1
#EXTRUDES HEIGHTS
S: MOV UP LEFT#X
MOV UP RIGHT#Y
MOV UP ACC#W
SAV
MOV UP ACC#H
MOV ACC DOWN #H|
L: SWP #W IN ACC
MOV ACC DOWN #W|
SWP #H IN ACC
MOV ACC DOWN #H|
 SUB 1#H--
JLZ S#NEEDTO SEND?
JMP L

@2
MOV LEFT DOWN

@3
L: JEZ REFUEL
MOV RIGHT ACC
JEZ REFUEL
SWP
SAV
MOV ACC RIGHT
JMP L
REFUEL: MOV UP ACC
SAV

#SENDS X

@4
HL: MOV 1 LEFT
MOV 1 RIGHT
MOV UP ACC #H
JEZ RESET
MOV LEFT DOWN #X|
ADD RIGHT #Y+H
SUB 1
MOV ACC DOWN #Y+H|
MOV UP DOWN
JMP HL
RESET:
MOV RIGHT NIL
MOV LEFT NIL
MOV 0 LEFT
MOV 0 RIGHT

@5
L: JEZ REFUEL
MOV LEFT ACC
JEZ REFUEL
SWP
SAV
MOV ACC LEFT
JMP L
REFUEL: MOV UP ACC
SAV

#SENDS Y

@6


@7
#NOTE ON ABOVE:
#PASS 0 TO THIS
#REPEATER TO RESET
#ANYTHING ELSE TO
#SEND THE STORED
#VALUE AGAIN

@8
MOV UP RIGHT
MOV UP RIGHT
MOV UP ACC
L:
 MOV 3 RIGHT#LINE
 SUB 1
 JGZ L
MOV -1 RIGHT

@9
MOV LEFT DOWN

@10
